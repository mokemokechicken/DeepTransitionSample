%package TransitionModel
%include    DeepTransitionSample-Swift.h
%class      TransitionViewControllerModel
%fsmclass   TransitionModelFSM

%start  TransitionModelStateMap::IDLE

%map TransitionModelStateMap
%%

IDLE
Entry { onEntryIdle(); }
{
  request(destination: NSString*) CONFIRMING { onRequestConfirming(destination); }
}

CONFIRMING
{
  cancel IDLE {}
  ok REMOVING {}
}

REMOVING
Entry { onEntryRemoving(); }
{
  add ADDING {}
}

ADDING
Entry { onEntryAdding(); }
{
  finish_add(vc: id) FINISH_ADD { onFinishAdd(vc); }
}

FINISH_ADD
{
  add ADDING {}
  finish_transition IDLE {}
}

Default {
  stop IDLE {}
  Default nil {}
}
%%
